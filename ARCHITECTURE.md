# ğŸ—ï¸ DEX é¡¹ç›®æ¶æ„æ€»è§ˆ

> åŸºäº UniswapV2 çš„å»ä¸­å¿ƒåŒ–äº¤æ˜“æ‰€ - ç°ä»£åŒ–æ¶æ„å®ç°

**é¡¹ç›®å¯åŠ¨**: 2025-10-28  
**å½“å‰çŠ¶æ€**: âœ… Phase 3 å®Œæˆ (æ ¸å¿ƒåŠŸèƒ½ 100%)  
**æœ€åæ›´æ–°**: 2025-10-30

---

## ğŸ“‹ ç›®å½•

- [ä¸€ã€ç³»ç»Ÿæ¶æ„](#ä¸€ç³»ç»Ÿæ¶æ„)
- [äºŒã€æ ¸å¿ƒåŸåˆ™](#äºŒæ ¸å¿ƒåŸåˆ™)
- [ä¸‰ã€æ™ºèƒ½åˆçº¦å±‚](#ä¸‰æ™ºèƒ½åˆçº¦å±‚)
- [å››ã€åç«¯æœåŠ¡å±‚](#å››åç«¯æœåŠ¡å±‚)
- [äº”ã€å‰ç«¯åº”ç”¨å±‚](#äº”å‰ç«¯åº”ç”¨å±‚)
- [å…­ã€æ•°æ®æµç¨‹](#å…­æ•°æ®æµç¨‹)
- [ä¸ƒã€æŠ€æœ¯æ ˆ](#ä¸ƒæŠ€æœ¯æ ˆ)
- [å…«ã€é¡¹ç›®ç»“æ„](#å…«é¡¹ç›®ç»“æ„)

---

## ä¸€ã€ç³»ç»Ÿæ¶æ„

### 1.1 æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å‰ç«¯åº”ç”¨ (React + Viem)                     â”‚
â”‚                                                               â”‚
â”‚  åŠŸèƒ½ï¼š                                                        â”‚
â”‚  âœ… ç›´æ¥è°ƒç”¨æ™ºèƒ½åˆçº¦ï¼ˆSwap, Liquidityï¼‰                         â”‚
â”‚  âœ… ç”¨æˆ·é€šè¿‡ MetaMask ç­¾åäº¤æ˜“                                 â”‚
â”‚  âœ… æŸ¥è¯¢åç«¯ APIï¼ˆåªè¯»æ•°æ®ï¼‰                                   â”‚
â”‚  âœ… WebSocket å®æ—¶æ›´æ–°                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                      â”‚
            â”‚ ç›´æ¥è°ƒç”¨              â”‚ API æŸ¥è¯¢
            â–¼                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æ™ºèƒ½åˆçº¦å±‚           â”‚  â”‚   åç«¯æœåŠ¡å±‚                   â”‚
â”‚   (Solidity)          â”‚  â”‚   (NestJS - åªè¯»æœåŠ¡)          â”‚
â”‚                       â”‚  â”‚                                â”‚
â”‚  âœ… DEXFactory        â”‚  â”‚  âœ… Analytics Service          â”‚
â”‚  âœ… DEXRouter         â”‚  â”‚     - Pool æ•°æ®æŸ¥è¯¢            â”‚
â”‚  âœ… DEXPair           â”‚  â”‚     - History å†å²è®°å½•          â”‚
â”‚  âœ… WETH9             â”‚  â”‚     - Analytics æ•°æ®åˆ†æ       â”‚
â”‚  âœ… MockERC20         â”‚  â”‚     - Quote ä»·æ ¼æŠ¥ä»·           â”‚
â”‚                       â”‚  â”‚     - BlockchainListener ç›‘å¬   â”‚
â”‚                       â”‚  â”‚                                â”‚
â”‚                       â”‚  â”‚  âœ… Wallet Service             â”‚
â”‚                       â”‚  â”‚     - Balance ä½™é¢æŸ¥è¯¢         â”‚
â”‚                       â”‚  â”‚     - Token ä»£å¸ä¿¡æ¯           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                         â”‚
            â”‚                         â”‚ åªè¯»æŸ¥è¯¢ (Viem)
            â”‚                         â–¼
            â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  Hardhat Node        â”‚
                           â”‚  (æˆ–å…¶ä»– EVM é“¾)      â”‚
                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                           â”‚                     â”‚
                           â–¼                     â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ PostgreSQL â”‚      â”‚ Redis        â”‚
                    â”‚ (æ•°æ®åº“)    â”‚      â”‚ (ç¼“å­˜)       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## äºŒã€æ ¸å¿ƒåŸåˆ™

### 2.1 å»ä¸­å¿ƒåŒ–åŸåˆ™ âœ…

**äº¤æ˜“æ‰§è¡Œï¼š**
- âœ… ç”¨æˆ·é€šè¿‡ MetaMask è‡ªå·±ç®¡ç†ç§é’¥
- âœ… ç”¨æˆ·è‡ªå·±ç­¾åå¹¶æäº¤äº¤æ˜“
- âœ… åç«¯**ä¸æŒæœ‰**ç§é’¥
- âœ… åç«¯**ä¸æ‰§è¡Œ**äº¤æ˜“

**æ•°æ®æµç¨‹ï¼š**
```
ç”¨æˆ· â†’ MetaMask â†’ ç­¾å â†’ æ™ºèƒ½åˆçº¦ â†’ é“¾ä¸Šæ‰§è¡Œ
                                      â†“
                              é“¾ä¸Šäº‹ä»¶è§¦å‘
                                      â†“
                        åç«¯ç›‘å¬å™¨æ•è· â†’ è®°å½•å†å²
```

### 2.2 èŒè´£åˆ†ç¦»

| å±‚çº§ | èŒè´£ | ç‰¹ç‚¹ |
|------|------|------|
| **å‰ç«¯** | ç”¨æˆ·äº¤äº’ã€äº¤æ˜“ç­¾å | ç›´æ¥è°ƒç”¨åˆçº¦ |
| **æ™ºèƒ½åˆçº¦** | äº¤æ˜“æ‰§è¡Œã€èµ„äº§ç®¡ç† | å»ä¸­å¿ƒåŒ–ã€ä¸å¯ç¯¡æ”¹ |
| **åç«¯** | æ•°æ®æŸ¥è¯¢ã€åˆ†æç»Ÿè®¡ | åªè¯»æœåŠ¡ã€æå‡ä½“éªŒ |
| **æ•°æ®åº“** | å†å²è®°å½•ã€ç¼“å­˜ | æé«˜æŸ¥è¯¢æ•ˆç‡ |

---

## ä¸‰ã€æ™ºèƒ½åˆçº¦å±‚

### 3.1 æ ¸å¿ƒåˆçº¦

| åˆçº¦ | çŠ¶æ€ | è¡Œæ•° | åŠŸèƒ½ |
|------|------|------|------|
| **DEXPair** | âœ… | ~420 | AMM æ ¸å¿ƒï¼Œæ’å®šä¹˜ç§¯åšå¸‚ |
| **DEXFactory** | âœ… | ~80 | äº¤æ˜“å¯¹åˆ›å»ºå’Œç®¡ç† |
| **DEXRouter** | âœ… | ~480 | ç”¨æˆ·äº¤æ˜“å…¥å£ |
| **MockERC20** | âœ… | ~20 | æµ‹è¯•ä»£å¸ (USDT/DAI/USDC) |
| **WETH9** | âœ… | ~60 | Wrapped ETH |

### 3.2 æ ¸å¿ƒç®—æ³•

#### AMM æ’å®šä¹˜ç§¯å…¬å¼
```
x Ã— y = k

å…¶ä¸­ï¼š
x = Token A å‚¨å¤‡é‡
y = Token B å‚¨å¤‡é‡
k = æ’å®šå€¼
```

#### æ‰‹ç»­è´¹æœºåˆ¶
```
æ‰‹ç»­è´¹: 0.3%
æµåŠ¨æ€§æä¾›è€…æ”¶ç›Š: 0.25%
åè®®è´¹ç”¨: 0.05%
```

---

## å››ã€åç«¯æœåŠ¡å±‚

### 4.1 Analytics Serviceï¼ˆåˆ†ææœåŠ¡ï¼‰

**å®šä½ï¼š** åªè¯»æ•°æ®æœåŠ¡

**æ¨¡å—ç»“æ„ï¼š**
```
analytics-service/
â”œâ”€â”€ pool/                    # æ± å­æ•°æ®ç®¡ç†
â”‚   â”œâ”€â”€ pool.service.ts      # æŸ¥è¯¢ã€åˆ·æ–°æ± å­
â”‚   â”œâ”€â”€ pool.controller.ts   # API ç«¯ç‚¹
â”‚   â””â”€â”€ pool.entity.ts       # æ•°æ®åº“å®ä½“
â”‚
â”œâ”€â”€ quote/                   # ä»·æ ¼æŠ¥ä»·
â”‚   â”œâ”€â”€ quote.service.ts     # æŠ¥ä»·è®¡ç®—
â”‚   â””â”€â”€ quote.controller.ts  # API ç«¯ç‚¹
â”‚
â”œâ”€â”€ history/                 # å†å²è®°å½•
â”‚   â”œâ”€â”€ history.service.ts   # å†å²æŸ¥è¯¢
â”‚   â”œâ”€â”€ history.controller.ts
â”‚   â”œâ”€â”€ swap-history.entity.ts
â”‚   â””â”€â”€ liquidity-history.entity.ts
â”‚
â”œâ”€â”€ analytics/               # æ•°æ®åˆ†æ
â”‚   â”œâ”€â”€ analytics.service.ts # ç»Ÿè®¡è®¡ç®—
â”‚   â””â”€â”€ analytics.controller.ts
â”‚
â””â”€â”€ blockchain-listener/     # äº‹ä»¶ç›‘å¬
    â”œâ”€â”€ blockchain-listener.service.ts  # ç›‘å¬å™¨
    â”œâ”€â”€ scheduler.service.ts  # å®šæ—¶åŒæ­¥
    â””â”€â”€ websocket.gateway.ts  # å®æ—¶æ¨é€
```

**æ ¸å¿ƒåŠŸèƒ½ï¼š**

1. **Pool Module** - æ± å­ç®¡ç†
   - `GET /pool` - æŸ¥è¯¢æ‰€æœ‰æ± å­
   - `GET /pool/:id` - æŸ¥è¯¢å•ä¸ªæ± å­
   - `POST /pool/:id/refresh` - åˆ·æ–°æ± å­æ•°æ®

2. **Quote Module** - ä»·æ ¼æŠ¥ä»·
   - `POST /quote` - è·å–äº¤æ˜“æŠ¥ä»·
   - `POST /quote/exact-out` - ç²¾ç¡®è¾“å‡ºæŠ¥ä»·

3. **History Module** - å†å²è®°å½•
   - `GET /history/swaps` - Swap å†å²
   - `GET /history/liquidity` - æµåŠ¨æ€§å†å²
   - `GET /history/user/:address/recent` - ç”¨æˆ·æ´»åŠ¨

4. **Analytics Module** - æ•°æ®åˆ†æ
   - `GET /analytics/overview` - å…¨å±€æ¦‚è§ˆ
   - `GET /analytics/pool/:id` - æ± å­åˆ†æ
   - `GET /analytics/user/:address` - ç”¨æˆ·ç»Ÿè®¡

5. **BlockchainListener** - äº‹ä»¶ç›‘å¬
   - ç›‘å¬ PairCreatedã€Syncã€Mintã€Burnã€Swap äº‹ä»¶
   - è‡ªåŠ¨æ›´æ–°æ•°æ®åº“
   - WebSocket å®æ—¶æ¨é€

### 4.2 Wallet Serviceï¼ˆé’±åŒ…æœåŠ¡ï¼‰

**åŠŸèƒ½ï¼š**
- âœ… ä½™é¢æŸ¥è¯¢
- âœ… ä»£å¸ä¿¡æ¯
- âœ… åœ°å€ç®¡ç†
- âœ… äº¤æ˜“æ‰«æ

---

## äº”ã€å‰ç«¯åº”ç”¨å±‚

### 5.1 æŠ€æœ¯æ ˆ

```typescript
React 18 + TypeScript + Vite
â”œâ”€â”€ UI æ¡†æ¶: Ant Design
â”œâ”€â”€ çŠ¶æ€ç®¡ç†: Zustand
â”œâ”€â”€ æ•°æ®è¯·æ±‚: React Query + Axios
â”œâ”€â”€ Web3 é›†æˆ:
â”‚   â”œâ”€â”€ wagmi (React Hooks)
â”‚   â”œâ”€â”€ viem (ä»¥å¤ªåŠåº“)
â”‚   â””â”€â”€ MetaMask (é’±åŒ…)
â””â”€â”€ å®æ—¶é€šä¿¡: Socket.IO Client
```

### 5.2 æ ¸å¿ƒ Hooks

**useSwap** - Swap äº¤æ˜“
```typescript
const { swapExactTokensForTokens, checkAndApprove } = useSwap()

// å‰ç«¯ç›´æ¥è°ƒç”¨åˆçº¦
await swapExactTokensForTokens({
  tokenIn, tokenOut, amountIn, amountOutMin, deadline
})
```

**useLiquidity** - æµåŠ¨æ€§ç®¡ç†
```typescript
const { addLiquidity, removeLiquidity } = useLiquidity()

// å‰ç«¯ç›´æ¥è°ƒç”¨åˆçº¦
await addLiquidity({
  tokenA, tokenB, amountADesired, amountBDesired, deadline
})
```

**useWallet** - é’±åŒ…è¿æ¥
```typescript
const { address, isConnected, connect } = useWallet()
```

**useWebSocket** - å®æ—¶æ›´æ–°
```typescript
const { isConnected } = usePoolWebSocket(handlePoolUpdate)
```

### 5.3 é¡µé¢ç»“æ„

```
å‰ç«¯/
â”œâ”€â”€ Swap         # Swap äº¤æ˜“é¡µé¢
â”œâ”€â”€ Liquidity    # æµåŠ¨æ€§ç®¡ç†é¡µé¢
â”œâ”€â”€ Pool         # æ± å­åˆ—è¡¨å’Œè¯¦æƒ…
â”œâ”€â”€ History      # äº¤æ˜“å†å²
â””â”€â”€ Portfolio    # ç”¨æˆ·æŠ•èµ„ç»„åˆ
```

---

## å…­ã€æ•°æ®æµç¨‹

### 6.1 Swap æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. ç”¨æˆ·åœ¨å‰ç«¯è¾“å…¥äº¤æ˜“å‚æ•°                    â”‚
â”‚     - è¾“å…¥ä»£å¸ã€è¾“å‡ºä»£å¸ã€æ•°é‡               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. å‰ç«¯è°ƒç”¨åç«¯ Quote APIï¼ˆå¯é€‰ï¼‰            â”‚
â”‚     - è·å–é¢„æœŸè¾“å‡ºé‡                         â”‚
â”‚     - è®¡ç®—æ»‘ç‚¹                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. å‰ç«¯æ£€æŸ¥å¹¶æˆæƒä»£å¸ï¼ˆå¦‚éœ€è¦ï¼‰              â”‚
â”‚     - ERC20.approve(router, amount)         â”‚
â”‚     - ç”¨æˆ·é€šè¿‡ MetaMask ç­¾å                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. å‰ç«¯è°ƒç”¨ Router åˆçº¦                     â”‚
â”‚     - Router.swapExactTokensForTokens()     â”‚
â”‚     - ç”¨æˆ·é€šè¿‡ MetaMask ç­¾å                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5. æ™ºèƒ½åˆçº¦æ‰§è¡Œäº¤æ˜“                         â”‚
â”‚     - æ‰£é™¤è¾“å…¥ä»£å¸                           â”‚
â”‚     - è½¬å…¥è¾“å‡ºä»£å¸                           â”‚
â”‚     - è§¦å‘ Swap äº‹ä»¶                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  6. åç«¯ç›‘å¬å™¨æ•è·äº‹ä»¶                       â”‚
â”‚     - è®°å½•åˆ° swap_history è¡¨                â”‚
â”‚     - æ›´æ–° Pool å‚¨å¤‡é‡                       â”‚
â”‚     - WebSocket æ¨é€æ›´æ–°                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  7. å‰ç«¯å®æ—¶æ›´æ–°                             â”‚
â”‚     - WebSocket æ¥æ”¶æ›´æ–°                     â”‚
â”‚     - åˆ·æ–°ä½™é¢å’Œæ± å­æ•°æ®                     â”‚
â”‚     - æ˜¾ç¤ºäº¤æ˜“æˆåŠŸæç¤º                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 æ•°æ®åŒæ­¥æµç¨‹

```
é“¾ä¸Šäº‹ä»¶è§¦å‘
    â†“
BlockchainListener ç›‘å¬
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. æ›´æ–° Pool è¡¨      â”‚ (reserve0, reserve1)
â”‚ 2. åˆ›å»º History è®°å½• â”‚ (swap_history / liquidity_history)
â”‚ 3. WebSocket å¹¿æ’­    â”‚ (å®æ—¶æ¨é€ç»™å‰ç«¯)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
å‰ç«¯æ¥æ”¶æ›´æ–°
    â†“
UI è‡ªåŠ¨åˆ·æ–°
```

---

## ä¸ƒã€æŠ€æœ¯æ ˆ

### 7.1 å®Œæ•´æŠ€æœ¯æ ˆ

| å±‚çº§ | æŠ€æœ¯ |
|------|------|
| **æ™ºèƒ½åˆçº¦** | Solidity 0.8.20, Hardhat, Viem |
| **åç«¯** | NestJS, TypeScript, TypeORM |
| **æ•°æ®åº“** | PostgreSQL, Redis |
| **å‰ç«¯** | React 18, TypeScript, Vite |
| **Web3** | Wagmi, Viem, MetaMask |
| **UI** | Ant Design |
| **å®æ—¶é€šä¿¡** | Socket.IO |

### 7.2 å…³é”®ä¾èµ–

```json
{
  "åç«¯": {
    "@nestjs/core": "^10.0.0",
    "typeorm": "^0.3.0",
    "viem": "^2.0.0",
    "socket.io": "^4.0.0"
  },
  "å‰ç«¯": {
    "react": "^18.0.0",
    "wagmi": "^2.0.0",
    "viem": "^2.0.0",
    "antd": "^5.0.0",
    "zustand": "^4.0.0"
  },
  "åˆçº¦": {
    "hardhat": "^2.19.0",
    "@openzeppelin/contracts": "^5.0.0"
  }
}
```

---

## å…«ã€é¡¹ç›®ç»“æ„

```
dex/
â”œâ”€â”€ contracts/                  # æ™ºèƒ½åˆçº¦
â”‚   â”œâ”€â”€ contracts/
â”‚   â”‚   â”œâ”€â”€ core/               # æ ¸å¿ƒåˆçº¦
â”‚   â”‚   â”œâ”€â”€ periphery/          # å¤–å›´åˆçº¦
â”‚   â”‚   â””â”€â”€ test/               # æµ‹è¯•åˆçº¦
â”‚   â””â”€â”€ scripts/                # éƒ¨ç½²è„šæœ¬
â”‚
â”œâ”€â”€ backend/services/
â”‚   â”œâ”€â”€ analytics-service/      # æ•°æ®åˆ†ææœåŠ¡ â­
â”‚   â”‚   â””â”€â”€ src/modules/
â”‚   â”‚       â”œâ”€â”€ pool/           # æ± å­ç®¡ç†
â”‚   â”‚       â”œâ”€â”€ quote/          # ä»·æ ¼æŠ¥ä»·
â”‚   â”‚       â”œâ”€â”€ history/        # å†å²è®°å½•
â”‚   â”‚       â”œâ”€â”€ analytics/      # æ•°æ®åˆ†æ
â”‚   â”‚       â””â”€â”€ blockchain-listener/  # äº‹ä»¶ç›‘å¬
â”‚   â”‚
â”‚   â””â”€â”€ wallet-service/         # é’±åŒ…æœåŠ¡
â”‚       â””â”€â”€ src/modules/
â”‚           â”œâ”€â”€ balance/        # ä½™é¢æŸ¥è¯¢
â”‚           â”œâ”€â”€ token/          # ä»£å¸ä¿¡æ¯
â”‚           â””â”€â”€ address/        # åœ°å€ç®¡ç†
â”‚
â”œâ”€â”€ frontend/web-app/           # å‰ç«¯åº”ç”¨
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ pages/              # é¡µé¢
â”‚       â”œâ”€â”€ hooks/              # React Hooks
â”‚       â”œâ”€â”€ services/           # API æœåŠ¡
â”‚       â””â”€â”€ components/         # UI ç»„ä»¶
â””â”€â”€ scripts/                    # æµ‹è¯•è„šæœ¬
```

---

## ğŸ¯ æ¶æ„ä¼˜åŠ¿

### 1. **çœŸæ­£çš„å»ä¸­å¿ƒåŒ–** âœ…
- ç”¨æˆ·å®Œå…¨æŒæ§ç§é’¥å’Œèµ„äº§
- åç«¯æ— æ³•ä»£æ›¿ç”¨æˆ·æ‰§è¡Œäº¤æ˜“
- ç¬¦åˆ DeFi æœ€ä½³å®è·µ

### 2. **å®‰å…¨æ€§** âœ…
- æ²¡æœ‰å•ç‚¹æ•…éšœ
- ç§é’¥ç”±ç”¨æˆ·ç®¡ç†
- åç«¯åªè¯»ï¼Œé™ä½é£é™©

### 3. **ç”¨æˆ·ä½“éªŒ** âœ…
- å®æ—¶æ•°æ®æ›´æ–°ï¼ˆWebSocketï¼‰
- å®Œæ•´çš„å†å²è®°å½•
- æ•°æ®åˆ†æå’Œç»Ÿè®¡

### 4. **å¯ç»´æŠ¤æ€§** âœ…
- èŒè´£æ¸…æ™°
- ä»£ç ç®€æ´
- æ˜“äºæ‰©å±•

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [GETTING_STARTED.md](./GETTING_STARTED.md) - å¿«é€Ÿå¼€å§‹
- [START_ALL.md](./START_ALL.md) - å¯åŠ¨æœåŠ¡

---

**æ¶æ„ç‰ˆæœ¬ï¼š** v1.0  
**æœ€åæ›´æ–°ï¼š** 2025-10-30  
**ç»´æŠ¤è€…ï¼š** DEX Team
